<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tampilan informasi ukm</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="CSS & IMG/dataadminstyle.css">
</head>
<body>
    <!-- navbar -->
    <nav class="navbar navbar-dark bg-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="dashboard admin.html"><span>Project </span>Sukses</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasDarkNavbar" aria-controls="offcanvasDarkNavbar" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="offcanvas offcanvas-end text-bg-dark" tabindex="-1" id="offcanvasDarkNavbar" aria-labelledby="offcanvasDarkNavbarLabel">
            <div class="offcanvas-header">
                <h5 class="offcanvas-title" id="offcanvasDarkNavbarLabel">Menu </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
              <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                <li class="nav-item">
                    <a class="nav-link" aria-current="page" href="dashboard admin.html">Dashboard</a>
                </li>
                <li class="nav-item dropdown">
                  <a class="nav-link active dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Jenis Unit Kegiatan Mahasiswa
                  </a>
                  <ul class="dropdown-menu dropdown-menu-dark">
                    <li><a class="dropdown-item nav-link active" href="UKM FKIP Mengajar.html">UKM FKIP Mengajar</a></li>
                    <li><a class="dropdown-item" href="UKM Kopma ULM.html">UKM Kopma ULM</a></li>
                    <li><a class="dropdown-item" href="UKM PSHT ULM.html">UKM PSHT</a></li>
                    <li><a class="dropdown-item" href="UKM LDK UKMM ULM.html">UKM LDK UKMM</a></li>
                  </ul>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="Logout()">Logout</a>
                  </li>
              </ul>
            </div>
          </div>
        </div>
    </nav>
      
      <!-- Logo dan penjelasan sedikit terkait ukm -->
      <h1>UKM FKIP MENGAJAR</h1>
      <br>
      <img src="CSS & IMG/image/FMULM.png" alt="FMULM" width="200px" height="200px" style="display: block; margin: auto;">
      <br>
      <table style="margin-left:50px;margin-right:auto">
        <tr>
            <td  width="640px">Ketua Umum : Muhammad Ramadhani</td>
            <td>Sekertaris Umum : Risma Liyanti</td>
        </tr>
        <tr>
            <td  width="640px">Prodi : Pendidikan Komputer</td>
            <td>Prodi : Pendidikan Bahasa dan Sastra Indonesia</td>
        </tr>
      </table>
      <br>

      <div >
          <p class="div_text">UKM FKIP MENGAJAR ULM Adalah salah satu organisasi tingkat fakultas (FKIP ULM). Satu-satunya organisasi FKIP ULM yang bergerak dibidang pendidikan dan pengabdian. Organisasi yang berdiri dan diresmikan sejak 17 Desember 2016 oleh Wakil Dekan 3 FKIP diwakilkan Ibu Dr. Hj. Atiek Winarti, M.Pd, M.Sc. di Aula Hasan Bondan atau Aula 2 FKIP ULM Banjarmasin. 
            Sejarah terbentuknya Unit Kegiatan Mahasiswa FKIP MENGAJAR ULM berawal dari kegelisahan mahasiswa FKIP yang pada saat itu belum adanya UKM yang benar-benar bergerak dibidang pendidikan sesuai dengan ranah Fakultas Keguruan dan Ilmu Pendidikan ULM sendiri. Karena kegelisahan itu membuat 14 orang mahasiswa/i dari berbagai program studi di FKIP, yang pada saat itu sebagian 
            besar adalah anggota dari BEM FKIP ULM berkumpul dan membicarakan bersama keinginan ingin membuat UKM baru di FKIP ULM yang memiliki tujuan sesuai dengan bidang kependidikan. Membuat dan mendirikan sebuah UKM untuk setingkat fakultas tidaklah mudah, banyak tantangan dan kritikan yang harus dilalui hingga bisa benar-benar berdiri kokoh dan kuat. Di resmikan pada tanggal 17 
            Desember 2016 di Aula Hasan Bondan atau Aula 2 FKIP ULM Banjarmasin, dengan nama UKM FKIP MENGAJAR ULM menjadi UKM termuda di seluruh Ormawa FKIP ULM. Walaupun menjadi UKM paling muda pada tahun 2020, UKM FKIP MENGAJAR ULM mendapatkan penghargaan perdana di FKIP, yaitu menjadi Unit Kegiatan Mahasiswa terbaik di Fakultas Keguruan dan Ilmu Pendidikan Universitas Lambung Mangkurat.</p>
      </div>
      <p class="div_text">Untuk informasi lebih lanjut silahkan klik : <a href="https://www.instagram.com/fkipmengajarulm/?hl=en"><img src="CSS & IMG/image/Instagram.png" alt="IG" width="22px"></a> <a href="https://ukmfmfkip.ulm.ac.id/"><img src="CSS & IMG/image/FMULM.png" alt="FKIP" width="20px"></a></p>
      <hr>

    <!-- Table data mahasiswa -->
    <h2 class="text_tengah">Data Mahasiswa Pilkom yang Masuk UKM FKIP Mengajar</h2>
    <div>
        <button class="btn" id="btnTambah">Tambah Data</button>
        <table class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th>No</th>
                    <th>Nama</th>
                    <th>Nim</th>
                    <th>Prodi</th>
                    <th>Aksi</th>
                </tr>
            </thead>
            <tbody id="data">

            </tbody>
        </table>
    </div>

    <!-- tambah data -->
    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>

            <div>
                <h3 style="text-align: center;">Tambah Data</h3>
                <table style="margin-left:auto;margin-right:auto">
                    <tr>
                        <td><label for="nama">Nama</label></td>
                        <td><input type="text" name="nama" id="nama"></td>
                    </tr>
                    <tr>
                        <td><label for="nim">NIM</label></td>
                        <td><input type="text" name="nim" id="nim"></td>
                    </tr>
                    <tr>
                        <td><label for="prodi">Prodi</label></td>
                        <td><input type="text" name="prodi" id="prodi"></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td><input type="button" value="Submit" name="submit" id="submit" class="btn"></td>
                    </tr>
                    
                </table>
            </div>
        </div>
    </div>

    <!-- Modal Edit Data -->
    <div id="editModal" class="modal">

        <!-- Modal Content -->
        <div class="modal-content">
            <span class="close">&times;</span>

            <div>
                <h3 style="text-align: center;">Tambah Data</h3>
                <table style="margin-left: auto;margin-right: auto;">
                    <tr>
                        <td><label for="nama">Nama</label></td>
                        <td scope="col"><input type="text" name="nama" id="namaEdit"></td>
                    </tr>
                    <tr>
                        <td><label for="nim">NIM</label></td>
                        <td><input type="text" name="nim" id="nimEdit"></td>
                    </tr>
                    <tr>
                        <td><label for="prodi">Prodi</label></td>
                        <td><input type="text" name="prodi" id="prodiEdit"></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td><input type="button" value="Submit" name="submit" id="submitEdit" class="btn"></td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    <script src = "CSS & IMG/dataadminjava.js"></script>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      

        // TODO: Add SDKs for Firebase products that you want to use
        import { getDatabase, ref, set, push, get, child, onValue, update, remove } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-database.js";



        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyC2wTeDFKZGcwLYePxgTeW1CgLyiomspAs",
            authDomain: "data-data-f15d7.firebaseapp.com",
            projectId: "data-data-f15d7",
            storageBucket: "data-data-f15d7.appspot.com",
            messagingSenderId: "600110289849",
            appId: "1:600110289849:web:a65d49e335a62ddf79dc68"
        };

      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);


        // inisialisasi tiap inputan
        let nama = document.getElementById('nama');
        let nim = document.getElementById('nim');
        let prodi = document.getElementById('prodi');
        var selectedKey;
        var editModal = document.getElementById('editModal');

        // kerangka isi tbody
        var tbody = document.getElementById('data');
        var no = 0;

        function addItemToTable(key, nama, nim, prodi){
            let trow = document.createElement('tr');

            let table =` 
                        <td>${++no}</td>
                        <td>${nama}</td>
                        <td>${nim}</td>
                        <td>${prodi}</td>
                `
            
            let td = document.createElement('td')

            let btnEdit = document.createElement('button');
            let t = document.createTextNode('Edit');
            btnEdit.id = 'btnEdit';
            btnEdit.classList.add('btn')
            btnEdit.value = key
            btnEdit.appendChild(t);
            btnEdit.addEventListener('click', ()=>{
                editModal.style.display = 'block';
                selectedKey = btnEdit.value;
            })
            btnEdit.onclick = function(){showDataEdit(btnEdit.value)};
            
            let btnHapus = document.createElement('button');
            t = document.createTextNode('Hapus');
            btnHapus.id = 'btnHapus';
            btnHapus.classList.add('btnmerah')
            btnHapus.value = key;
            btnHapus.appendChild(t);
            btnHapus.addEventListener('click', (key)=>{
                hapusData(btnEdit.value)
            })

            trow.innerHTML = table;
            td.appendChild(btnEdit);
            td.appendChild(btnHapus);
            trow.appendChild(td);

            tbody.appendChild(trow);
        }

        function AddAllItemToTable(Mahasiswa){
            no = 0;
            tbody.innerHTML='';
            Mahasiswa.forEach(element => {
                addItemToTable(element.key, element.nama, element.nim, element.prodi);
            })
        }

        // tambah data
        function tambahData(){
            let data = {
                nama: nama.value,
                nim: nim.value,
                prodi: prodi.value
            };

            push(ref(database, 'mahasiswa'), data)
            .then(()=>{
                nama.value = '';
                nim.value = '';
                prodi.value = '';
            })
        }

        // tombol submit data
        document.getElementById('submit').addEventListener('click', tambahData);

        // data
        function getAllDataRealTime(){
            const dbRef = ref(database, 'mahasiswa');
            var tabel = document.getElementById('tabel');

            onValue(dbRef, (snapshot)=>{
                var mahasiswa = []
                snapshot.forEach(childSnapshot =>{
                    let temp = childSnapshot.val();
                    temp['key'] = childSnapshot.key;
                    mahasiswa.push(temp);
                });
            AddAllItemToTable(mahasiswa);
            })
        }
        window.onload = getAllDataRealTime();

        // update data
        var submitEdit = document.getElementById('submitEdit');
        submitEdit.onclick = function(){updateData(selectedKey)};
        
        function updateData(id){
            let data = {
                nama: namaEdit.value,
                nim: nimEdit.value,
                prodi: prodiEdit.value
            };

            update(ref(database, 'mahasiswa/'+id), data)
            .then(()=>{
                namaEdit.value = '';
                nimEdit.value = '';
                prodiEdit.value = '';
                editModal.style.display = 'none'
            });
        }

         // hapus data
         function hapusData(id){
            remove(ref(database, 'mahasiswa/'+id))
            .then(()=>{
            });
        }



        

      </script>
</body>
</html>