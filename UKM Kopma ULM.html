<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tampilan informasi ukm</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="CSS & IMG/dataadminstyle.css">
</head>
<body>
    <!-- navbar -->
    <nav class="navbar navbar-dark bg-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="dashboard admin.html">Projek Sukses</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasDarkNavbar" aria-controls="offcanvasDarkNavbar" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="offcanvas offcanvas-end text-bg-dark" tabindex="-1" id="offcanvasDarkNavbar" aria-labelledby="offcanvasDarkNavbarLabel">
            <div class="offcanvas-header">
                <h5 class="offcanvas-title" id="offcanvasDarkNavbarLabel">Menu </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
              <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                <li class="nav-item">
                    <a class="nav-link" aria-current="page" href="dashboard admin.html">Dashboard</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link active dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                      Jenis Unit Kegiatan Mahasiswa
                    </a>
                    <ul class="dropdown-menu dropdown-menu-dark">
                      <li><a class="dropdown-item" href="UKM FKIP Mengajar.html">UKM FKIP Mengajar</a></li>
                      <li><a class="dropdown-item nav-link active" href="UKM Kopma ULM.html">UKM Kopma ULM</a></li>
                      <li><a class="dropdown-item" href="UKM PSHT ULM.html">UKM PSHT</a></li>
                      <li><a class="dropdown-item" href="LDK UKMM ULM.html">UKM LDK UKMM</a></li>
                    </ul>
                  </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="Logout()">Logout</a>
                  </li>
              </ul>
            </div>
          </div>
        </div>
    </nav>
      
      <!-- Logo dan penjelasan sedikit terkait ukm -->
      <h1>UKM Koperasi Mahasiswa Universitas Lambung Mangkurat</h1>
      <br>
      <img src="CSS & IMG/image/kopma.png" alt="kopma" width="200px" height="200px" style="display: block; margin: auto;">
      <br>
      <table style="margin-left:50px;margin-right:auto">
        <tr>
            <td  width="640px">Ketua Umum : Hafiz Zaini</td>
            <td>Wakil Ketua Umum : Hanifah Muslimah</td>
        </tr>
        <tr>
            <td  width="640px">Fakultas : Keguruan dan Ilmu Pendidikan</td>
            <td>Fakultas : Pertanian</td>
        </tr>
      </table>
      <br>

      <div >
          <p class="div_text">Sejarah Singkat Kopma Unlam,09 MAR Koperasi Mahasiswa Universitas Lambung Mangkurat atau disingkat Kopma Unlam adalah suatu organisasi kemahasiswaan yang bergerak dalam bidang kewirausahaan kemahasiwaan dengan memiliki No. Badan Hukum : 1564/BH/IX Tanggal 4 September 1982 yang berkedudukan
             di Jl. Brigjen H. Hasan Basri Kotamadya Banjarmasin. Kopma Unlam Memiliki sejarah yang panjang namun minim dalam pengembangan bila ditinjau dari segi tahun berdirinya. Kopma Unlam didirikan dengan maksud mengembangkan ideolog kehidupan perkoperasian selaku badan usaha dengan melandaskan kegiatannya berdasarkan
              prinsip koperasi sekaligus sebagai gerakan ekonomi rakyat yang berdasarkan asas kekeluargaan dan sebagai wadah mahasiswa dalam mengasah kemampuan mereka dalam berorganisasi dan mengelola bisnis sebagai pembentukan diri yang di harapkan agar menjadi wirauasahawan yang handal nantinya. Maksud tersebut mengalami 
              stak nan yang tidak diketahui sejak kapan dengan arsip terakhir yang bisa ditelusuri hanya Anggaran Dasar Perubahan Tahun 1997 Kopma Unlam yang diperoleh dari Dinas Koperasi dan UMK Profinsi Kalimantan Selatan. Putusnya kaderisasi kepengurusan yang berlangsung selama hampir sepuluh tahun lebih menjadi faktor 
              yang melatarbelakangi dari stak nan Kopma Unlam. Sebagai bentuk nyata kepedulian masyarakat Civitas Akademi maka Kopma Unlam dicoba untuk digerakan kembali. Pembentukan kembali Kopma Unlam diawali dengan rapat pada Tanggal 12 Januari 2009 dengan perihal Rencana Membangun kembali koperasi Mahasiswa (KOPMA) Unlam, 
              terus dilanjutkan dengan rapat pada Tanggal 21 Januari 2009 yang dipimpin oleh Bapak Prof Ir. H. Muhammad Rasmadi, MS selaku Rektor Universitas Lambung Mangkurat yang dihadiri oleh seluruh perwakilan Civitas Akademika Unlam yang menghasilkan suatu keputusan tentang pembentukan Tim Persiapan Pembentukan Koperasi 
              Mahasiswa Unlam yang dikuatkan dengan SK Rektor Universitas Lambung Mangkurat No : 12/ H8/ KM/ 2009 yang diketuai oleh Bapak Ir. Hamdanai selaku Pembantu Rektor III. Kemudian dilanjutkan dengan rapat pada Tanggal 29 Januari 2009 tentang pembentukan calon Badan Pengurus dan Calon Badan Pengawas Kopma Unlam. 
              pembentukan kembali Kopma Unlam yang hanya dipersipakan dengan memakan waktu tiga bulan maka terlantiklah Badan Pengurus dan Badan Pengawas pada tanggal 10 Maret 2009 dengan Surat Keputusan Rektor Universitas Lambung Mangkurat No : 44/H8?KM/2009 dengan struktur kepengurusan dan kepengawasan sebagai berikut: 
              Dalam Badan Pengursu pada tanggal 10 Maret 2009 ada enam struktur keorganisasian yang dianggakat yaitu Ketua yang dijabat oleh Nur Rahmanto, Dwi ade Pratiwi sebagai wakil Ketua, Dewi Sartika selaku Sekretaris I, Sukmawati selaku Sekretaris II, Maulidayanti sebagai Bendahara serta dua anggota yaitu Abdul Azis dan 
              Anshori Shaleh Badan Pengawas terdapat dua Struktur keorganisasian yaitu Jakhratun Nupus sebagai Ketua dan dua Naggota yaitu masing-masing Shinta Ayu Pratiwi dan Ahmad Zaki.</p>
      </div>
      <p class="div_text">Untuk informasi lebih lanjut silahkan klik : <a href="https://www.instagram.com/kopma.ulm/?hl=en"><img src="CSS & IMG/image/Instagram.png" alt="IG" width="22px"></a> <a href="https://www.tiktok.com/@kopma_ulm"><img src="CSS & IMG/image/Tiktok.png" alt="Tiktok" width="32px"></a></p>
      <hr>

    <!-- Table data mahasiswa -->
    <h2 class="text_tengah">Data Mahasiswa Pilkom yang Masuk UKM Koperasi Mahasiswa</h2>
    <div>
        <button class="btn" id="btnTambah">Tambah Data</button>
        <table class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th>No</th>
                    <th>Nama</th>
                    <th>Nim</th>
                    <th>Prodi</th>
                    <th>Aksi</th>
                </tr>
            </thead>
            <tbody id="data">

            </tbody>
        </table>
    </div>

    <!-- tambah data -->
    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>

            <div>
                <h3 style="text-align: center;">Tambah Data</h3>
                <table style="margin-left:auto;margin-right:auto">
                    <tr>
                        <td><label for="nama">Nama</label></td>
                        <td><input type="text" name="nama" id="nama"></td>
                    </tr>
                    <tr>
                        <td><label for="nim">NIM</label></td>
                        <td><input type="text" name="nim" id="nim"></td>
                    </tr>
                    <tr>
                        <td><label for="prodi">Prodi</label></td>
                        <td><input type="text" name="prodi" id="prodi"></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td><input type="button" value="Submit" name="submit" id="submit" class="btn"></td>
                    </tr>
                    
                </table>
            </div>
        </div>
    </div>

    <!-- Modal Edit Data -->
    <div id="editModal" class="modal">

        <!-- Modal Content -->
        <div class="modal-content">
            <span class="close">&times;</span>

            <div>
                <h3 style="text-align: center;">Tambah Data</h3>
                <table style="margin-left: auto;margin-right: auto;">
                    <tr>
                        <td><label for="nama">Nama</label></td>
                        <td scope="col"><input type="text" name="nama" id="namaEdit"></td>
                    </tr>
                    <tr>
                        <td><label for="nim">NIM</label></td>
                        <td><input type="text" name="nim" id="nimEdit"></td>
                    </tr>
                    <tr>
                        <td><label for="prodi">Prodi</label></td>
                        <td><input type="text" name="prodi" id="prodiEdit"></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td><input type="button" value="Submit" name="submit" id="submitEdit" class="btn"></td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    <script src = "CSS & IMG/dataadminjava.js"></script>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      

        // TODO: Add SDKs for Firebase products that you want to use
        import { getDatabase, ref, set, push, get, child, onValue, update, remove } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-database.js";



        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyC2wTeDFKZGcwLYePxgTeW1CgLyiomspAs",
            authDomain: "data-data-f15d7.firebaseapp.com",
            projectId: "data-data-f15d7",
            storageBucket: "data-data-f15d7.appspot.com",
            messagingSenderId: "600110289849",
            appId: "1:600110289849:web:a65d49e335a62ddf79dc68"
        };

      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);


        // inisialisasi tiap inputan
        let nama = document.getElementById('nama');
        let nim = document.getElementById('nim');
        let prodi = document.getElementById('prodi');
        var selectedKey;
        var editModal = document.getElementById('editModal');

        // kerangka isi tbody
        var tbody = document.getElementById('data');
        var no = 0;

        function addItemToTable(key, nama, nim, prodi){
            let trow = document.createElement('tr');

            let table =` 
                        <td>${++no}</td>
                        <td>${nama}</td>
                        <td>${nim}</td>
                        <td>${prodi}</td>
                `
            
            let td = document.createElement('td')

            let btnEdit = document.createElement('button');
            let t = document.createTextNode('Edit');
            btnEdit.id = 'btnEdit';
            btnEdit.classList.add('btn')
            btnEdit.value = key
            btnEdit.appendChild(t);
            btnEdit.addEventListener('click', ()=>{
                editModal.style.display = 'block';
                selectedKey = btnEdit.value;
            })
            btnEdit.onclick = function(){showDataEdit(btnEdit.value)};
            
            let btnHapus = document.createElement('button');
            t = document.createTextNode('Hapus');
            btnHapus.id = 'btnHapus';
            btnHapus.classList.add('btnmerah')
            btnHapus.value = key;
            btnHapus.appendChild(t);
            btnHapus.addEventListener('click', (key)=>{
                hapusData(btnEdit.value)
            })

            trow.innerHTML = table;
            td.appendChild(btnEdit);
            td.appendChild(btnHapus);
            trow.appendChild(td);

            tbody.appendChild(trow);
        }

        function AddAllItemToTable(Kopma){
            no = 0;
            tbody.innerHTML='';
            Kopma.forEach(element => {
                addItemToTable(element.key, element.nama, element.nim, element.prodi);
            })
        }

        // tambah data
        function tambahData(){
            let data = {
                nama: nama.value,
                nim: nim.value,
                prodi: prodi.value
            };

            push(ref(database, 'kopma'), data)
            .then(()=>{
                nama.value = '';
                nim.value = '';
                prodi.value = '';
            })
        }

        // tombol submit data
        document.getElementById('submit').addEventListener('click', tambahData);

        // data
        function getAllDataRealTime(){
            const dbRef = ref(database, 'kopma');
            var tabel = document.getElementById('tabel');

            onValue(dbRef, (snapshot)=>{
                var kopma = []
                snapshot.forEach(childSnapshot =>{
                    let temp = childSnapshot.val();
                    temp['key'] = childSnapshot.key;
                    kopma.push(temp);
                });
            AddAllItemToTable(kopma);
            })
        }
        window.onload = getAllDataRealTime();

        // update data
        var submitEdit = document.getElementById('submitEdit');
        submitEdit.onclick = function(){updateData(selectedKey)};
        
        function updateData(id){
            let data = {
                nama: namaEdit.value,
                nim: nimEdit.value,
                prodi: prodiEdit.value
            };

            update(ref(database, 'kopma/'+id), data)
            .then(()=>{
                namaEdit.value = '';
                nimEdit.value = '';
                prodiEdit.value = '';
                editModal.style.display = 'none'
            });
        }

         // hapus data
         function hapusData(id){
            remove(ref(database, 'kopma/'+id))
            .then(()=>{
            });
        }



        

      </script>
</body>
</html>